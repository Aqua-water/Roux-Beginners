<script type="text/javascript" src="/twistysim.js"></script>
<style type="text/css" rel="stylesheet">
/* modifies the opacity of the cube wireframe */
.ttk-shp-poly {
    stroke-opacity: 0.3;
}
</style>

# 后六棱归位

## 目标

这步要**在色向还原的基础上**，将剩下的6个棱块彻底复原，从而完成整个魔方的复原。分为两个阶段：

先将左右面位于顶层的2个棱块复原，并将M层的中心块对齐，剩下最后M层的4个棱块。

<div id="l6e-l4e">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wlwwwwwlwgggggggggrlrrrrrlrylyyyyylybbbbbbbbbolooooolo')
    ('#l6e-l4e');
</script>
</div>

再复原最后4个棱块。

## 1 左右棱

### 1-1 左右棱置底

为了复原左右面位于顶层的2个棱块(ULUR)，我们先将要归位的黄蓝、黄绿棱块都放到底层。

以下是一个具体例子。你可以拖动魔方，主要查看底层的状态：

<div id="l6e-ulur">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wywwwwwywggggggglgrbrrrrrlrylylylylybbbbbbblbogooooolo')
    ('#l6e-ulur');
</script>
</div>

还原方法如下：

如果恰好有一个黄蓝或黄绿棱块在顶层：

先`Ux`将该棱块放在M层，并且保证其下方不是黄蓝或黄绿棱块。再做[基本操作五](./eo.md#基本操作五-m-u2-m)或[六](./eo.md#基本操作六-m-u2-m)，完成上下棱块的交换，将其放在底层。

这个例子通过基本操作六，将黄绿棱块从UR位移到DB位。

<div id="l6e-ulur-1">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wywwwwwywggggggglgrbrrrrrlrylylylylybbbbbbblbogooooolo')
    .case(`U' M U2 M'`)
    ('#l6e-ulur-1');
</script>
</div>

如果黄蓝、黄绿棱块都在顶层：

通过`Ux`将其中一个棱块放在M层，再`M2`将其放在底层。这样，至多有一个棱块仍然留在顶层，转化为上一种情形。

这个例子将黄绿棱块移到DB位，然后再通过基本操作五，将黄蓝棱块从UR位移到DF位。

<div id="l6e-ulur-2">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wlwwwwwlwgggggggbgrlrrrrrgryyylyyylybbbbbbblbolooooolo')
    .alg(`M2 U M' U2 M`)
    ('#l6e-ulur-2');
</script>
</div>

这样就将两个棱块都放在底层了，两个棱块谁在前并不重要，但色向必须正确。

### 1-2 左右棱归位

左右棱都放到底层后，做`Ux`调整顶层角块的姿态，然后做`M2`，将黄蓝、黄绿棱块分别与对应的角块合并。最后做`Ux`，将左右棱块彻底归位。

<div id="l6e-ulur-3">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wywwwwwywggggggglgrbrrrrrlrylylylylybbbbbbblbogooooolo')
    .alg(`U M2 U'`)
    ('#l6e-ulur-3');
</script>
</div>

初学时，可以做`Mx`将黄白中心块也对齐，以便于观察。

## 2 后四棱

这步完成最后4个棱块的复原（L4E）。

完成左右面的复原后，魔方的形态变得更加对称了。你可以自由尝试一些M层操作与`U2`的组合。在初学时，也可以自由地做一些[x转体](./../记号.md#x-转体)。

下面对后四棱分情况讨论。

###	三棱换

如果对齐中心块后，M层恰好有3个棱块未复原，那么就是三棱换情形。我们介绍两种复原方法，但更加推荐不转体的方法。

#### 不转体

这种方法不依赖于转体，也不需要提前对齐黄白中心块。使用`Mx`与`U2`交替的转动序列，将魔方复原。

我们引入**连色对**的概念，以确定每一步应该如何转动：对于F面或B面中位于M层的三个颜色，如果两侧有一个颜色与中心块的颜色相同，那么它们就组成一个连色对。

首先判断`U2`是否会破坏位于F面和B面的连色对。在下面的例子中，B面的红色连色对被保留，但F面的橙色连色对被破坏。

<div id="l6e-pair">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('tttttttttttttttttttrttottottttttttttttttttttttrttrttot')
    .alg(`U2`)
    ('#l6e-pair');
</script>
</div>

如果不会破坏连色对，那么直接转`U2`；否则转动M层，直到不会破坏F面和B面的连色对后，再转`U2`。

下面的例子中，做`M'`后F面出现黄色连色对，不会被`U2`破坏。B面的白色连色对同理。

<div id="l6e-pair-2">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('tyttyttwtttttttttttrttottottyttwttwtttttttttttrttrttot')
    .alg(`M' U2`)
    ('#l6e-pair-2');
</script>
</div>

`U2`后，继续转动M层，寻找另一个不会破坏连色对的状态，然后继续做`U2`。至多5步，就能完成复原。

<div id="l6e-pair-3">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('tyttyttwtttttttttttrttottottyttwttwtttttttttttrttrttot')
    .alg(`M' U2 M U2 M2`)
    ('#l6e-pair-3');
</script>
</div>

更多的例子请参考[后四棱公式](./lse.md#后四棱公式)，你可以观察每一步是怎样避免打乱连色对的。理解这一过程有助于养成直觉，同时避免记忆每种情形的公式。

#### x转体

依赖转体的方法如下。对齐中心块后做x转体，使复原的棱块位于DF位上。

下图中，我们将已复原的黄红棱块转到DF位上。

<div id="l6e-L4E">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wywwwwwwwgggggggggrorrrrrrryyyyyyywybbbbbbbbboooooooro')
    .alg(`x'`)
    ('#l6e-L4E');
</script>
</div>

进一步观察：

如果UF位的棱块颜色与两侧中心块的颜色都相反，做`U2 M U2 M'`（即`U2`+ 基本操作六）。

如图，UF位的白红棱块，两侧的中心块分别为黄、橙，满足要求。

<div id="l6e-L4E-2">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('rrrrrrrrrgggggggggyyyyyyyyyooooooooobbbbbbbbbwwwwwwwww')
    .case(`U2 M U2 M'`)
    ('#l6e-L4E-2');
</script>
</div>

如果UF位的棱块颜色仅与前面中心块的颜色相反，做`M U2 M' U2`（即基本操作六+`U2`）。

<div id="l6e-L4E-3">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('rrrrrrrrrgggggggggyyyyyyyyyooooooooobbbbbbbbbwwwwwwwww')
    .case(`M U2 M' U2`)
    ('#l6e-L4E-3');
</script>
</div>

### 四心换

这种情况下，对齐中心块后，有四个面呈“H”型。做`E2 M' E2 M'`。

<div id="l6e-L4E-5">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wwwwwwwwwgggggggggrrrrrrrrryyyyyyyyybbbbbbbbbooooooooo')
    .case(`E2 M' E2 M'`)
    ('#l6e-L4E-5');
</script>
</div>

> 之所以笼统地称这类情况为“四心换”，是因为做`M2`后，除了4个中心块外的所有块都已复原。

### "H"

这种情况下，对齐中心块后，四个面已经复原，而剩余两个相对的面呈“H”型。

可以将一个H型的面放在F面，做`U2 M2 U2 M2`；如果不在F面，也可以不转体，做`M' U2 M2 U2 M'`。

<div id="l6e-L4E-4">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('rrrrrrrrrgggggggggyyyyyyyyyooooooooobbbbbbbbbwwwwwwwww')
    .case(`x' U2 M2 U2 M2`)
    ('#l6e-L4E-4');
</script>
</div>

<div id="l6e-L4E-4">
<script type="text/javascript">
  TTk.AlgorithmPuzzle(3)
    .size({width:300, height:300})
    .fc('wwwwwwwwwgggggggggrrrrrrrrryyyyyyyyybbbbbbbbbooooooooo')
    .case(`M' U2 M2 U2 M'`)
    ('#l6e-L4E-4');
</script>
</div>

至此，魔方的六面都已经复原，大功告成！

你可以反复练习，直到能够不依赖教程而独立复原。